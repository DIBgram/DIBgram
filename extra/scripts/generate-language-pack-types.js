/**
 * This script reads the built-in English language pack and generates language pack string types from it.
 * Usage:
 *   node ./extra/scripts/generate-language-pack-types.js
 */

const fs = require('fs');

const script = fs.readFileSync('./src/dibgram/language-pack/english.json', 'utf8');

const keys= Object.keys(JSON.parse(script));

const transpiled = 
`// This file is automatically generated by extra/scripts/generate-language-pack-types.js

import builtinLanguagePack from './english.json';
import specialStringsEnglish from './special-strings/en.json';

export type LanguagePackKey = keyof typeof builtinLanguagePack;

export type LanguagePackStringName = ${keys.map(key=>key.split('#')[0]).map(key => `'${key}'`).join(' | ')};

export type LanguagePackStringNamePluralized = ${keys.filter(key=>key.includes('#')).map(key=>key.split('#')[0]).map(key => `'${key}'`).join(' | ')};

export type LanguagePackSpecialStringName = keyof typeof specialStringsEnglish;

`;

fs.writeFileSync('./src/dibgram/language-pack/language-pack-types.ts', transpiled);